{"version":3,"sources":["webpack:///./src/js/search.js"],"names":["__webpack_require__","r","__webpack_exports__","calSearch","instantsearch","appId","apiKey","indexName","searchParameters","highlightPreTag","highlightPostTag","docSearch","hitsPerPage","govSearch","allSearch","routing","searchFunction","helper","query","state","page","setQuery","setPage","search","addWidget","widgets","searchBox","container","placeholder","pagination","padding","scrollTo","cssClasses","root","disabled","hits","templates","empty","item","start","searchNav","Array","from","document","querySelectorAll","swapHits","forEach","e","addEventListener","preventDefault","classList","remove","target","add","holderOn","dataset","holder","h","id","switchHits"],"mappings":"0MAAAA,EAAAC,EAAAC,GAAAF,EAAA,YAEMG,EAAYC,cAAc,CAC9BC,MAAO,aACPC,OAAQ,mCACRC,UAAW,uBACXC,iBAAkB,CAChBC,gBAAiB,4BACjBC,iBAAkB,eAIhBC,EAAYP,cAAc,CAC9BC,MAAO,aACPC,OAAQ,mCACRC,UAAW,uBACXC,iBAAkB,CAChBC,gBAAiB,4BACjBC,iBAAkB,YAClBE,YAAa,MAIXC,EAAYT,cAAc,CAC9BC,MAAO,aACPC,OAAQ,mCACRC,UAAW,wBACXC,iBAAkB,CAChBC,gBAAiB,4BACjBC,iBAAkB,eAIhBI,EAAYV,cAAc,CAC9BC,MAAO,aACPC,OAAQ,mCACRC,UAAW,iBACXC,iBAAkB,CAChBC,gBAAiB,4BACjBC,iBAAkB,aAEpBK,SAAS,EACTC,eAAgB,SAASC,GACvB,IAAMC,EAAQJ,EAAUG,OAAOE,MAAMD,MAC/BE,EAAON,EAAUG,OAAOE,MAAMC,KACpCP,EAAUI,OAAOI,SAASH,GAC1BL,EAAUI,OAAOK,QAAQF,GACzBP,EAAUI,OAAOM,SACjBpB,EAAUc,OAAOI,SAASH,GAC1Bf,EAAUc,OAAOK,QAAQF,GACzBjB,EAAUc,OAAOM,SACjBZ,EAAUM,OAAOI,SAASH,GAC1BP,EAAUM,OAAOK,QAAQF,GACzBT,EAAUM,OAAOM,SACjBN,EAAOM,YAIXT,EAAUU,UACRpB,cAAcqB,QAAQC,UAAU,CAC9BC,UAAW,gBACXC,YAAa,YAIjBd,EAAUU,UACRpB,cAAcqB,QAAQI,WAAW,CAC/BF,UAAW,qBACXG,QAAS,EAETC,UAAU,EACVC,WAAY,CACVC,KAAM,mBACNC,SAAU,UAKhBpB,EAAUU,UACRpB,cAAcqB,QAAQU,KAAK,CACzBR,UAAW,YACXS,UAAW,CACTC,MAAO,aACPC,KAAI,qqBAyBNN,WAAY,CACVC,KAAM,YAKZpB,EAAUW,UACRpB,cAAcqB,QAAQU,KAAK,CACzBR,UAAW,YACXS,UAAW,CACTC,MAAO,aACPC,KAAI,ylBAmBNN,WAAY,CACVC,KAAM,YAKZtB,EAAUa,UACRpB,cAAcqB,QAAQU,KAAK,CACzBR,UAAW,YACXS,UAAW,CACTC,MAAO,aACPC,KAAI,ghBAgBNN,WAAY,CACVC,KAAM,YAKZ9B,EAAUqB,UACRpB,cAAcqB,QAAQU,KAAK,CACzBR,UAAW,YACXS,UAAW,CACTC,MAAO,aACPC,KAAI,8XAWNN,WAAY,CACVC,KAAM,YAKZtB,EAAU4B,QACVpC,EAAUoC,QACV1B,EAAU0B,QACVzB,EAAUyB,QAEV,IAAMC,EAAYC,MAAMC,KAAKC,SAASC,iBAAiB,mBACjDC,EAAWJ,MAAMC,KAAKC,SAASC,iBAAiB,gBAEtDJ,EAAUM,QAAQ,SAASC,IAI3B,SAAoBA,GAClBA,EAAEC,iBAAiB,QAAS,SAASD,GACnCA,EAAEE,iBACFT,EAAUM,QAAQ,SAASC,GACzBA,EAAEG,UAAUC,OAAO,YAErBJ,EAAEK,OAAOF,UAAUG,IAAI,UACvB,IAAIC,EAAWP,EAAEK,OAAOG,QAAQC,OAChCX,EAASC,QAAQ,SAASW,GACpBA,EAAEC,IAAMJ,EACVG,EAAEP,UAAUC,OAAO,UAEnBM,EAAEP,UAAUG,IAAI,cAftBM,CAAWZ","file":"/js/search.js","sourcesContent":["import { publicDecrypt } from \"crypto\";\n\nconst calSearch = instantsearch({\n  appId: \"6V5VJO8ZG2\",\n  apiKey: \"9bded46d3070b2089499c70b2389708b\",\n  indexName: \"production_calendars\",\n  searchParameters: {\n    highlightPreTag: '<b class=\"font-bold\"><em>',\n    highlightPostTag: '</em></b>',\n  },\n});\n\nconst docSearch = instantsearch({\n  appId: \"6V5VJO8ZG2\",\n  apiKey: \"9bded46d3070b2089499c70b2389708b\",\n  indexName: \"production_documents\",\n  searchParameters: {\n    highlightPreTag: '<b class=\"font-bold\"><em>',\n    highlightPostTag: '</em></b>',\n    hitsPerPage: 10,\n  },\n});\n\nconst govSearch = instantsearch({\n  appId: \"6V5VJO8ZG2\",\n  apiKey: \"9bded46d3070b2089499c70b2389708b\",\n  indexName: \"production_government\",\n  searchParameters: {\n    highlightPreTag: '<b class=\"font-bold\"><em>',\n    highlightPostTag: '</em></b>',\n  },\n});\n\nconst allSearch = instantsearch({\n  appId: \"6V5VJO8ZG2\",\n  apiKey: \"9bded46d3070b2089499c70b2389708b\",\n  indexName: \"production_all\",\n  searchParameters: {\n    highlightPreTag: '<b class=\"font-bold\"><em>',\n    highlightPostTag: '</em></b>',\n  },\n  routing: true,\n  searchFunction: function(helper) {\n    const query = allSearch.helper.state.query;\n    const page = allSearch.helper.state.page;\n    govSearch.helper.setQuery(query);\n    govSearch.helper.setPage(page);\n    govSearch.helper.search();\n    calSearch.helper.setQuery(query);\n    calSearch.helper.setPage(page);\n    calSearch.helper.search();\n    docSearch.helper.setQuery(query);\n    docSearch.helper.setPage(page);\n    docSearch.helper.search();\n    helper.search();\n  },\n});\n\nallSearch.addWidget(\n  instantsearch.widgets.searchBox({\n    container: \"#search-input\",\n    placeholder: \"Search\"\n  })\n);\n\nallSearch.addWidget(\n  instantsearch.widgets.pagination({\n    container: \"#bottom-pagination\",\n    padding: 5,\n    // default is to scroll to 'body', here we disable this behavior\n    scrollTo: false,\n    cssClasses: {\n      root: \"p-0 inline-block\",\n      disabled: \"w-0\"\n    }\n  })\n);\n\nallSearch.addWidget(\n  instantsearch.widgets.hits({\n    container: \"#all-hits\",\n    templates: {\n      empty: \"No results\",\n      item: `\n      <div>\n        <h3 class=\"text-lg mb-2\"><a class=\"hover:bg-green-300 hover:text-white\" href=\"{{ url }}\">{{{_highlightResult.title.value}}}</a></h3>\n\n        <p class=\"text-sm my-0\">\n          {{{ _snippetResult.leadIn.value }}}\n        </p>\n\n        {{{ #summary }}}\n          <p class=\"text-sm my-0\">\n            {{{ _snippetResult.summary.value }}}\n          </p>\n        {{{ /summary }}}\n        {{ ^summary }}\n          <p class=\"text-sm my-0\">\n            {{{ _snippetResult.body.value }}}\n          </p>\n        {{{ /summary }}}\n\n        <p class=\"text-sm my-0\">\n          {{{ _snippetResult.bio.value }}}\n        </p>\n      </div>\n      `\n    },\n    cssClasses: {\n      root: \"block\"\n    },\n  })\n);\n\ngovSearch.addWidget(\n  instantsearch.widgets.hits({\n    container: \"#gov-hits\",\n    templates: {\n      empty: \"No results\",\n      item: `\n        <h3 class=\"text-lg mb-2\"><a class=\"block hover:bg-green-300 hover:text-white\" href=\"{{ url }}\">{{{_highlightResult.title.value}}}</a></h3>\n        {{{ #bio }}}\n          <p class=\"text-sm my-0\">\n            {{{ _snippetResult.bio.value }}}\n          </p>\n        {{{ /bio }}}\n        {{{ #about }}}\n          <p class=\"text-sm my-0\">\n            {{{ _snippetResult.about.value }}}\n          </p>\n        {{{ /about }}}\n        {{{ #leadIn }}}\n          <p class=\"text-sm my-0\">\n            {{{ _snippetResult.leadIn.value }}}\n          </p>\n        {{{ /leadIn }}}\n      `\n    },\n    cssClasses: {\n      root: \"block\"\n    },\n  })\n);\n\ndocSearch.addWidget(\n  instantsearch.widgets.hits({\n    container: \"#doc-hits\",\n    templates: {\n      empty: \"No results\",\n      item: `\n      <article class=\"text-sm mb-6\">\n        <h3 class=\"text-base my-0 leading-normal mb-2\"><a class=\"block hover:bg-green-300 hover:text-white\" href=\"{{ url }}\">{{{_highlightResult.title.value}}}</a></h3>\n        {{ ^leadIn }}\n          <p class=\"my-0\">\n            {{{ _snippetResult.leadIn.value }}}\n          </p>\n        {{{ /summary }}}\n        {{ ^documents }}\n          <p class=\"my-0\">\n            {{{ _snippetResult.summary.value }}}\n          </p>\n        {{{ /documents }}}\n      </article>\n      `\n    },\n    cssClasses: {\n      root: \"block\"\n    },\n  })\n);\n\ncalSearch.addWidget(\n  instantsearch.widgets.hits({\n    container: \"#cal-hits\",\n    templates: {\n      empty: \"No results\",\n      item: `\n        <article class=\"text-xs md:text-sm\">\n          <h3 class=\"text-base my-2\"><a class=\"block hover:bg-green-300 hover:text-white\" href=\"{{ url }}\">{{{_highlightResult.title.value}}}</a></h3>\n          {{{ #body }}}\n            <p class=\"mt-0 mb-2\">\n              {{{ _snippetResult.body.value }}}\n            </p>\n          {{{ /body }}}\n        </article>\n      `\n    },\n    cssClasses: {\n      root: \"block\"\n    },\n  })\n);\n\ndocSearch.start();\ncalSearch.start();\ngovSearch.start();\nallSearch.start();\n\nconst searchNav = Array.from(document.querySelectorAll('a[data-holder]'));\nconst swapHits = Array.from(document.querySelectorAll('[data-hits]'));\n\nsearchNav.forEach(function(e) {\n  switchHits(e);\n});\n\nfunction switchHits(e) {\n  e.addEventListener(\"click\", function(e) {\n    e.preventDefault();\n    searchNav.forEach(function(e) {\n      e.classList.remove('active');\n    });\n    e.target.classList.add('active');\n    let holderOn = e.target.dataset.holder;\n    swapHits.forEach(function(h) {\n      if (h.id == holderOn) {\n        h.classList.remove('hidden');\n      } else {\n        h.classList.add('hidden');\n      }  \n    });\n  })\n}"],"sourceRoot":""}