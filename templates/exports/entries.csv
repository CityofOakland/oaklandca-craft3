{% set entries = craft.entries.section(["documents", "documentPackets"]).all() %}
{% set options = {
  header: ["Title", "Section", "Author", "URL", "Edit Link", "Departments", "Boards", "Officials"]
} %}
{% set beam = craft.beam.create(options) %}

{# Display the list #}
{% for entry in entries %}
  {% set departments = [] %}
  {% set boards = [] %}
  {% set officials = [] %}
  {% if entry.departments | length %}
    {% for rel in entry.departments.all() %}
        {% set departments = departments | merge([rel.title]) %}
    {% endfor %}
  {% endif %}
  {% if entry.boardsCommissions | length %}
    {% for rel in entry.boardsCommissions.all() %}
        {% set boards = boards | merge([rel.title]) %}
    {% endfor %}
  {% endif %}
  {% if entry.officials | length %}
    {% for rel in entry.officials.all() %}
        {% set officials = officials | merge([rel.title]) %}
    {% endfor %}
  {% endif %}
  {% do beam.append([entry.title, entry.section, entry.author, entry.url, entry.cpEditUrl, departments | join(", "), boards | join(", "), officials | join(", ")]) %}
{% endfor %}

{% do beam.csv() %}