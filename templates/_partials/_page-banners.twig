{% set bannerImage = bannerImage ?? entry.banner ?? '' %}
{% set leadIn = leadIn ?? category.summary ?? entry.leadIn ?? '' %}
{% set ctaButton = ctaButton ?? entry.ctaButton ?? '' %}

{% if bannerTitle is defined %}
  {% do seomatic.meta.seoTitle(bannerTitle) %}
{% else %}
  {% set bannerTitle = category.title ?? entry.title ?? '' %}
{% endif %}

{# BANNER IMAGE #}
{% if bannerImage | length %}
  {%- set banner -%}
    <figure class="absolute inset-0 z-0">
      <img 
        class="absolute inset-0 z-0 object-cover w-full h-full" 
        style="object-position:{{ bannerImage.one.getFocalPoint('asCss') }};" 
        src="{{ bannerImage.one.url }}"
        alt="{{ bannerImage.one.title }}">
    </figure>
  {%- endset -%}
{% else %}
  {%- set banner -%}
    <div class="absolute inset-0 z-0 bg-transparent-oakland-roots">
    </div>
  {%- endset -%}
{% endif %}

{# BREADCRUMBS #}
{%- set breadCrumbs -%}
  <div class="relative z-10 inline-block px-2 py-1 text-xs text-green-400 bg-white rounded-sm shadow md:text-xs">
    <a class="text-green-400 hover:text-green-400 hover:underline" href="/">
      Oakland
    </a> →
    {% for link in breadCrumbLinks ?? '' %}
      <a class="text-green-400 hover:text-green-400 hover:underline" href="{{ link.link }}">{{ link.title }}</a> →
    {% endfor %}
    <span class="font-bold">{{ bannerTitle }}</span>
  </div>
{%- endset -%}

{# HEADER CONTENT #}
{%- set headerContent -%}
  <div class="flex flex-col flex-1 lg:flex-row">
    <div class="w-full lg:w-2/3">
      <h1 class="mb-0 font-bold text-xxxl md:text-xxxxl">{{ bannerTitle }}</h1>
      {% include "_partials/_elements/_page-alerts.twig" %}
      {% if leadIn %}
        <p class="mb-0 md:leading-loose">{{ leadIn | raw }}</p>
      {% endif %}
      {% if ctaButton | length %}
        {% set attributes = {
            class: 'btn py-2 mt-4 text-sm',
            "data-custom": 'custom-data-attribute'
        } %}
        {{ ctaButton.link(attributes) }}
      {% endif %}
    </div>
    <div class="w-full lg:w-1/3 lg:pl-4">
      {{ headerSubContent ?? '' }}
    </div>
  </div>
{%- endset -%}

{% if bannerImage | length %}
  <div class="leading-normal banner">
    {% include "_partials/_elements/_banner-google-translate.twig" with { paddingTop: "pt-5" } %}
    <div class="container pt-2 pb-8 leading-none md:pt-4 md:pb-6 min-h-2-1/2 md:min-h-4">
      {{ banner }}
      {{ breadCrumbs }}
    </div>
  </div>
{% else %}
  <div class="leading-none banner">
    {% include "_partials/_elements/_banner-google-translate.twig" with { paddingTop: "pt-5" } %}
    <div class="container pt-2 pb-8 md:pt-4 md:pb-6">
      {{ banner }}
      {{ breadCrumbs }}
    </div>
  </div>
{% endif %}
<div class="container relative sm:flex">
  {{ custHeaderContent ?? headerContent }}
</div>
